id: fivetran_sync_parallel
namespace: company.team

tasks:
  - id: marketing_extract_load
    type: io.kestra.plugin.core.flow.WorkingDirectory
    tasks:
      - id: data_ingestion
        type: io.kestra.plugin.core.flow.Parallel
        tasks:
          - id: salesforce
            type: io.kestra.plugin.fivetran.connectors.Sync
            connectorId: vesicle_movement

          - id: stripe
            type: io.kestra.plugin.fivetran.connectors.Sync
            connectorId: cell_delivery

          - id: google_analytics
            type: io.kestra.plugin.fivetran.connectors.Sync
            connectorId: equivocal_sandy

          - id: facebook_ads
            type: io.kestra.plugin.fivetran.connectors.Sync
            connectorId: molecule_transport

pluginDefaults:
  - type: io.kestra.plugin.fivetran.connectors.Sync
    values:
      apiKey: "{{ secret('FIVETRAN_API_KEY') }}"
      apiSecret: "{{ secret('FIVETRAN_API_SECRET') }}"
