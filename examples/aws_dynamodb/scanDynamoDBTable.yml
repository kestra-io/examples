id: scan_dynamodb_table
namespace: company.team

tasks:
  - id: extract_data
    type: io.kestra.plugin.aws.dynamodb.Scan
    tableName: demo
    fetchType: FETCH
    region: "{{ secret('AWS_DEFAULT_REGION') }}"
    accessKeyId: "{{ secret('AWS_ACCESS_KEY_ID') }}"
    secretKeyId: "{{ secret('AWS_SECRET_KEY_ID') }}"

  - id: process_data
    type: io.kestra.core.tasks.scripts.Bash
    commands:
      - echo {{ outputs.extract_data.rows }}
