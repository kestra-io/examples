# id: 35
# https://demo.kestra.io/ui/blueprints/community/35
# http://localhost:8080/ui/blueprints/35
# Extract and process data from DynamoDB
# Tags: AWS
description: |
  This flow scans a DynamoDB table and outputs the extracted data as a JSON string. The subsequent task processes that data.
  
  The `tableName` property must point to an already existing DynamoDB table.
  
  It's recommended to set the `accessKeyId` and `secretKeyId` properties as secrets.

id: 35_scanDynamoDBTable
namespace: blueprint

tasks:
  - id: extractData
    type: io.kestra.plugin.aws.dynamodb.Scan
    tableName: demo
    fetchType: FETCH
    region: "{{ secret('AWS_DEFAULT_REGION') }}"
    accessKeyId: "{{ secret('AWS_ACCESS_KEY_ID') }}"
    secretKeyId: "{{ secret('AWS_SECRET_ACCESS_KEY') }}"

  - id: processData
    type: io.kestra.plugin.scripts.shell.Commands
    runner: PROCESS
    commands:
      - echo {{outputs.extractData.rows}}
