# id: 27
# https://demo.kestra.io/ui/blueprints/community/27
# http://localhost:8080/ui/blueprints/27
# Send an SMS message using AWS SNS based on a runtime-specific input
# Tags: AWS, Inputs
description: |
  This flow sends an SMS message to a phone number using AWS SNS. The phone number must be registered when creating an AWS SNS topic. You can override the SMS message text at runtime by leveraging the input argument `smsText`.
  
  This flow assumes AWS credentials stored as secrets `AWS_ACCESS_KEY_ID`, `AWS_SECRET_ACCESS_KEY` and `AWS_DEFAULT_REGION`.

id: 27_sendSMS
namespace: blueprint

inputs:
  - name: smsText
    type: STRING
    defaults: "Hello from Kestra and AWS SNS!"

tasks:
  - id: sendSMS
    type: io.kestra.plugin.aws.sns.Publish
    region: "{{ secret('AWS_DEFAULT_REGION') }}"
    accessKeyId: "{{ secret('AWS_ACCESS_KEY_ID') }}"
    secretKeyId: "{{ secret('AWS_SECRET_ACCESS_KEY') }}"
    topicArn: arn:aws:sns:eu-central-1:338306982838:kestra
    from:
      data: |
        {{inputs.smsText}}